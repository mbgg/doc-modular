<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<article xml:id="kernel-boot-parameters-modify"
 role="task" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.2"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:trans="http://docbook.org/ns/transclusion">
  <info>
    <title>Modifying kernel boot parameters</title>
    <meta name="souvik.sarkar@suse.com" content="" its:translate="no"/>
    <abstract>
      <para>
        Kernel boot parameters are configurations passed to the &productname;
        kernel during the boot process for &grub;, instructing it on how to
        behave or configure certain features.
      </para>
    </abstract>
  </info>
  <section xml:id="kernel-boot-parameters-modification-requirements">
   <title>Requirments</title>
   <para>
    Depending on whether you want to apply changes in kernel boot parameters to the upcoming boot
    process, or all subsequent boot processes, the requirements are as follows:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      To change kernel boot parameters on an experimental basis only for the upcoming boot process,
      there are no requirements.
     </para>
    </listitem>
    <listitem>
     <para>
      To change kernel boot parameters for all subsequent boot processes, you should have
      <literal>root</literal> or equivalent administrative privileges.
     </para>
    </listitem>
   </itemizedlist>
   <tip>
    <para>
      Before modifying the kernel boot parameters, ensure that you create a
      copy of the existing stable configuration somewhere outside of your
      system. If the boat loader gets corrupted and your system fails to
      boot, or you face problems after booting your system, the back up helps
      you compare and restore the parameters to the last known working
      configuration.
    </para>
  </tip>
  </section>
  <section xml:id="kernel-boot-parameters-modification-reasons">
    <title>Reasons for kernel boot parameter modification</title>
    <para>
      Modifying kernel boot parameters is essential for achieving specific
      system configurations and addressing several scenarios, including:
    </para>
    <itemizedlist>
      <listitem>
        <formalpara>
          <title>Performance optimization</title>
          <para>
            Tweaking parameters to enhance system performance, responsiveness,
            and overall efficiency based on specific system requirements.
          </para>
        </formalpara>
      </listitem>
      <listitem>
        <formalpara>
          <title>Hardware compatibility</title>
          <para>
            Tailoring parameters to ensure compatibility with specific hardware
            components, addressing potential compatibility issues.
          </para>
        </formalpara>
      </listitem>
      <listitem>
        <formalpara>
          <title>Troubleshooting</title>
          <para>
            Altering parameters to troubleshoot issues such as graphics driver
            problems, ensuring a more stable and functional system.
          </para>
        </formalpara>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="kernel-boot-parameters-modification-examples">
    <title>Examples of commonly modified kernel boot parameters</title>
    <para>
      There are many different kernel parameters that you can optionally modify
      to customize your boot process. Based on you your use case, you can
      consider few of the most commonly modified kernel boot parameters:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          <literal>root=</literal>: Specifies the path to the root file system.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>quiet</literal>: Suppresses most boot messages.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>splash</literal>: Displays a graphical boot splash screen.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>nomodeset</literal>: Disables kernel mode setting.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>debug</literal>: Enables debugging output.
        </para>
      </listitem>
      <listitem>
        <para>
          <literal>acpi=</literal>: Toggles the Advanced Configuration and
          Power Interface (ACPI) settings.
        </para>
      </listitem>
    </itemizedlist>
    <para>
      Source documentation for kernel parameters is available at
      <link xlink:href="https://www.kernel.org/doc/Documentation/admin-guide/kernel-parameters.txt"/>
    </para>
    <tip>
      <title>Do not confuse kernel boot parameters with linuxrc parameters</title>
      <para>
        In &productname;, the <literal>linuxrc</literal> is a script that runs
        during the boot process before the systems's root file system is
        mounted, and serves as the initial RAM disk (initrd) entry point. The
        <literal>linuxrc</literal> parameters are used within this script to
        configure system further before transitioning to the actual root file
        system.
      </para>
      <para>
        Similar to kernel boot parameters, you can pass linuxrc parameters
        either using the command line, or using configuration files. The
        entries for linuxrc parameters are similar in appearance to that of the
        kernel boot parameters.
      </para>
      <para>
        To highlight the similarity in appearance, observe the following
        examples:
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <literal>rd.driver.blacklist=</literal>: Specifies drivers to be
            blacklisted in the initrd. For example,
            <literal>rd.driver.blacklist=nouveau</literal> prevents the
            <literal>nouveau</literal> graphics driver from loading.
          </para>
        </listitem>
        <listitem>
          <para>
            <literal>rd.break</literal>: Interrupts the boot process and drops
            the system to a shell for debugging purposes within the initrd.
          </para>
        </listitem>
        <listitem>
          <para>
            <literal>rd.retry=</literal>: Specifies the number of retries for
            device scanning in the initrd. For example,
            <literal>rd.retry=3</literal>.
          </para>
        </listitem>
        <listitem>
          <para>
            <literal>rd.luks=1</literal>: Activates support for encrypted
            devices in the initrd.
          </para>
        </listitem>
      </itemizedlist>
      <para>
        However, the kernel boot parameters and the linuxrc parameters are
        different concepts. To learn more about the linuxrc parameters, refer
        to
        <link xlink:href="https://documentation.suse.com/sles/html/SLES-all/appendix-linuxrc.html" os="sles"></link><link
        xlink:href="https://en.opensuse.org/SDB:Linuxrc" os="non-sles"></link>.
      </para>
    </tip>
  </section>
  <section xml:id="kernel-boot-parameters-modification-different-methods">
    <title>Methods of modifying kernel boot parameters</title>
    <para>
      There are two methods to modify your kernel boot parameters:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          <emphasis role="strong">Temporarily</emphasis>: Temporary changes are
          helpful to test the effect of modifying kernel boot parameters. After
          you have changed the kernel boot parameters, the changes are applied
          for the upcoming boot process. However, it does not survive
          subsequent boot processes.
        </para>
      </listitem>
      <listitem>
        <para>
          <emphasis role="strong">Permanently</emphasis>: Use this procedure if
          a change needs to be applied for all subsequent boot processes. Your
          changes are applied to all subsequent boot processes, unless modified
          further.
        </para>
      </listitem>
    </itemizedlist>
    <para>
      As an example, we disable the splash screen that you can see during the
      boot.
    </para>
  </section>
  <section xml:id="kernel-boot-parameters-modify-temporarily">
    <title>Temporarily modifying kernel boot parameters</title>
    <procedure>
      <step>
        <para>
          Switch on your computer to start the boot process.
        </para>
      </step>
      <step>
        <para>
          In the &grub; boot screen, highlight the entry you want to modify
          using the arrow keys <keycap function="up"/> and
          <keycap function="down"/>.
        </para>
      </step>
      <step>
        <para>
          Press the <keycap>E</keycap> key. You are presented with an editor
          and the content of the selected boot entry. It looks similiar to the
          following:
        </para>
<screen>setparams '&productname; &productnumber;'
  ...
  ...
  echo 'Loading Linux <replaceable>KERNEL_VERSION</replaceable> ...'
linux /boot/vmlinuz-<replaceable>KERNEL_VERSION</replaceable>
root=UUID=56d052b3-9148-4161-8065-3d97378d5783 ${extra_cmdline} <emphasis
role="strong">splash=silent</emphasis> resume=/dev/disk/by-uuid/69ff0e54-23a7-4ba8-8983-5a29c54ffa5e
quiet security=apparmor crashkernel=301M,high crashkernel=72M,low mitigations=auto
</screen>
      </step>
      <step>
        <para>
          Search for the string <literal>splash=silent</literal> and remove it.
        </para>
      </step>
      <step>
        <para>
          To boot the entry, press <keycap>F10</keycap> or <keycombo>
          <keycap function="control"/> <keycap>X</keycap> </keycombo>.
        </para>
        <para>
          To discard the changes and start anew, press the
          <keycap function="escape"/> key.
        </para>
      </step>
    </procedure>
    <para>
      During reboot, the splash screen is not displayed.
    </para>
  </section>
  <section xml:id="kernel-boot-parameters-modify-permanently">
    <title>Permanently modifying kernel boot parameters</title>
    <procedure>
      <step>
        <para>
          Log in to your system as root, or switch to a user with equivalent
          administrative priviliges after logging in to your system.
        </para>
      </step>
      <step>
        <para>
          In your running system, open a root shell and run the following
          command:
        </para>
<screen>&prompt.root;<command>yast bootloader</command></screen>
        <para>
          Alternatively, open the &yastcc; application and navigate to
          <guimenu>System</guimenu> &gt; <guimenu>Boot Loader</guimenu>.
        </para>
      </step>
      <step>
        <para>
          Under the <guimenu>Kernel Parameters</guimenu> tab, edit the string
          for the <guimenu>Optional Kernel Command Line Parameter</guimenu>
          field.
        </para>
<screen><emphasis role="strong">splash=silent</emphasis> resume=/dev/disk/by-uuid/69ff0e54-23a7-4ba8-8983-5a29c54ffa5e  quiet security=apparmor crashkernel=301M,high crashkernel=72M,low</screen>
        <para>
          As you can see, the string <literal>splash=silent</literal> is
          printed. Remove <literal>splash=silent</literal> from the string.
        </para>
      </step>
      <step>
        <para>
          Select <guimenu>OK</guimenu> to save the bootloader configuration.
        </para>
      </step>
      <step>
        <para>
          Reboot. You should see that the splash screen does not appear.
        </para>
      </step>
    </procedure>
  </section>
  <section xml:id="kernel-boot-parameters-modification-troubleshooting">
    <title>Troubleshooting kernel boot parameter modifications</title>
    <para>
      While modifying kernel boot parameters, challenges may arise, potentially
      leading to system instability or boot failure. A few troubleshooting
      steps to address such issues are listed below:
    </para>
    <itemizedlist>
      <listitem>
        <formalpara>
          <title>Incorrect parameter</title>
          <para>
            Ensure that the parameters' syntax and spelling are accurate,
            correcting any mistakes or typos in the configurations.
          </para>
        </formalpara>
      </listitem>
      <listitem>
        <formalpara>
          <title>Boot failure</title>
          <para>
            If the system fails to boot, use a previous stable snapshot to
            rescue the syste and then revert the changes to restore system
            functionality.
          </para>
        </formalpara>
      </listitem>
      <listitem>
        <formalpara>
          <title>System instability</title>
          <para>
            If the system exhibits instability or unexpected behavior, undo the
            changes made to the kernel boot parameters and reevert to the last
            working configuration. It is also recommended to closely monitor
            the system for stability.
          </para>
        </formalpara>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="kernel-boot-parameters-modification-related-articles">
    <title>Related articles</title>
    <itemizedlist>
      <listitem>
        <para>
          Detailed information about the parameters in the &grub; configuration
          file for &productname; is available at
          <link
          xlink:href="https://documentation.suse.com/sles/html/SLES-all/cha-grub2.html#sec-grub2-etc-default-grub"
          os="sles"></link><link xlink:href="https://doc.opensuse.org/documentation/leap/reference/single-html/book-reference/index.html#sec-grub2-etc-default-grub" os="non-sles"></link>.
        </para>
      </listitem>
      <listitem>
        <para>
          Detailed information of boot parameters for &productname; is
          available at
          <link
          xlink:href="https://documentation.suse.com/sles/html/SLES-all/cha-boot-parameters.html"
          os="sles"></link><link
          xlink:href="https://doc.opensuse.org/documentation/leap/startup/single-html/book-startup/index.html#cha-boot-parameters"
          os="non-sles"></link>.
        </para>
      </listitem>
    </itemizedlist>
  </section>
</article>
